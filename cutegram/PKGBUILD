# Originally taken and inspired from Crakra (CCR):
#   http://chakraos.org/ccr/pkgbuild_view.php?p=cutegram
# Original uploader to CCR: gnastyle
# Contributor from Chakra: FranzMari
# Contributor from Chakra: danyf90 <daniele.formihelli@gmail.com>
# Contributorfrom Chakra: totoloco <totoloco@gmx.com>

# Arch Linux (AUR):
# Maintainer: Llumex03
# Contributor: Thiago Perrotta <echo dGhpYWdvcGVycm90dGE5NUBnbWFpbC5jb20K | base64 -d >

pkgname=cutegram
_pkgname=Cutegram
pkgrel=2
pkgdesc="A different telegram client from the Aseman team"
arch=('i686' 'x86_64')
url="http://aseman.co/en/products/$pkgname/"
license=('GPL')
depends=('qt5-base' 'qt5-declarative' 'qt5-multimedia' 'qt5-quick1' 'qt5-graphicaleffects' 'qt5-quickcontrols' 'libqtelegram-bzr')
makedepends=('git' 'cmake')
source=("git+https://github.com/Aseman-Land/$_pkgname.git")
md5sums=('SKIP')

pkgver() {
  cd "${srcdir}/${_gitname}"
  git log -1 --format="%cd.g%h" --date=short | sed 's/-/./g'
}
 
build() {
  cd "${_pkgname}"
  mkdir build && cd build
  qmake-qt5 -r .. PREFIX=/usr
  make
}
 
package() {
  cd "${_pkgname}"/build
  make INSTALL_ROOT="$pkgdir" install
}
